---
import { PortableText } from "astro-portabletext";
import SectionCardsRows from "./SectionCardsRows.astro";
import SectionCardsDefault from "./SectionCardsDefault";
import HubMap from "./Sanity/HubMap";
import ScrollText from "./Sanity/ScrollText";
import Timeline from "./Sanity/Timeline";
import Cards from "./Sanity/Cards";
import Steps from "./Sanity/Steps";
import Faq from "./Sanity/Faq";
import Persons from "./Sanity/Persons";
import Partners from "./Sanity/Partners";
import Rounds from "./Sanity/Rounds";
import WorkshopsAndResources from "./Sanity/Workshops";

const { data } = Astro.props;
---

<div class="flex flex-col gap-16 py-20 sm:gap-32">
  {
    data?.map((item: any) => {
      if (item._type === "sectionHubMap") {
        return <HubMap title={item.title} client:load />;
      }

      if (item._type === "sectionScrollText") {
        return <ScrollText text={item.text} />;
      }

      if (item._type === "sectionTimeline") {
        return <Timeline />;
      }

      if (item._type === "sectionRowCards") {
        return <Cards title={item.title} cards={item.items} client:load />;
      }

      if (item._type === "sectionSteps") {
        return (
          <Steps
            title={item.title}
            description={item.description}
            info={item.info}
            items={item.items}
            showSteps={item.showSteps}
            client:load
          />
        );
      }

      if (item._type === "sectionPersons") {
        return <Persons title={item.title} persons={item.items} client:load />;
      }

      if (item._type === "sectionPartners") {
        console.log(item.items);
        return (
          <Partners title={item.title} partners={item.items} client:load />
        );
      }

      if (item._type === "sectionFaq") {
        return <Faq title={item.title} questions={item.items} client:load />;
      }

      if (item._type === "sectionRounds") {
        return (
          <Rounds
            title={item.title}
            description={item.description}
            rounds={item.items}
            client:load
          />
        );
      }

      if (item._type === "sectionWorkshops") {
        return (
          <WorkshopsAndResources
            title={item.title}
            workshops={item.workshops}
            resources={item.resources}
            client:load
          />
        );
      }

      if (item._type === "sectionCards" && item.layout === "rows") {
        return <SectionCardsRows data={item} />;
      } else if (item._type === "sectionCards" && item.layout !== "rows") {
        return <SectionCardsDefault data={item} client:load />;
      } else if (item._type === "sectionText") {
        return (
          <div class="portable-text portable-text mx-auto flex max-w-3xl flex-col items-start px-4 text-lg text-pretty md:px-6 lg:text-xl">
            <PortableText value={item.body} />
          </div>
        );
      }
    })
  }
</div>
