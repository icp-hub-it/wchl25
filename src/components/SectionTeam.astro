---
import { PortableText } from "astro-portabletext";
import { SanityImage } from "./SanityImage.astro";
import { urlFor } from "../utils/image";

const { data } = Astro.props;
---

<section class="grid gap-8">
  {data.title && <h2 class="t-2 px-4 text-center md:px-6">{data.title}</h2>}
  <div
    class="grid overflow-hidden border-y-2 border-black sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"
  >
    {
      data.items?.map(
        (item: {
          name: string;
          picture: { alt: string };
          jobTitle: string;
          text: any;
        }) => (
          <div class={`border border-black bg-white`}>
            {item.picture && (
              <SanityImage
                url={urlFor(item.picture).url()}
                width={100}
                height={100}
                alt={item.picture?.alt ?? ""}
                class="aspect-square w-full object-cover"
              />
            )}
            <div class="flex flex-col items-start p-4 md:p-6">
              <h3 class="t-3">{item.name}</h3>
              {item.jobTitle && (
                <span class="mono mt-2 opacity-50">{item.jobTitle}</span>
              )}
              <div class="mt-6">
                <PortableText value={item.text} />
              </div>
            </div>
          </div>
        ),
      )
    }
  </div>
</section>
